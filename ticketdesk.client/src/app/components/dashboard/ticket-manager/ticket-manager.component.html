<div class="container mt-4">
  <h2>Ticket Manager</h2>

  <!-- Button to create a new ticket -->
  <button pButton type="button" label="Create Ticket" class="p-button-raised p-button-primary" (click)="showDialog()"></button>

  <!-- Ticket list -->
  <p-table [value]="tickets" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ticket>
      <tr>
        <td>{{ ticket.ticketTittle }}</td>
        <td>{{ ticket.ticketDescription }}</td>
        <td>{{ getStatusName(ticket.statusId) }}</td>
        <td>
          <button pButton type="button" icon="pi pi-pencil" class="p-button-warning p-button-sm" (click)="editTicket(ticket)"></button>
          <button pButton type="button" icon="pi pi-trash" class="p-button-danger p-button-sm" (click)="deleteTicket(ticket.ticketId)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <!-- Dialog for creating and updating tickets -->
  <p-dialog header="{{ isEditMode ? 'Update Ticket' : 'Create Ticket' }}" id="Popup" [(visible)]="displayDialog" [modal]="true" [style]="{width: '500px'}">
    <form [formGroup]="ticketForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="ticketTittle">Title</label>
        <input type="text" pInputText formControlName="ticketTittle" class="form-control" id="ticketTittle" required>
      </div>
      <div class="form-group">
        <label for="ticketDescription">Description</label>
        <textarea pInputTextarea formControlName="ticketDescription" class="form-control" id="ticketDescription" required></textarea>
      </div>
      <div class="form-group">
        <label for="statusId">Status</label>
        <p-dropdown [options]="statuses" optionLabel="displayName" formControlName="statusId" class="form-control" id="statusId" required></p-dropdown>
      </div>
      <div class="p-dialog-footer">
        <button pButton type="submit" label="{{ isEditMode ? 'Update' : 'Create' }}" class="p-button-primary"></button>
      </div>
    </form>
  </p-dialog>
</div>
